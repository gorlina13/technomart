"use strict";function initMap(){var e="Техномарт",t={lat:59.938549,lng:30.322993},n={zoom:16,center:t,scrollwheel:!1},o={zoom:16,center:{lat:59.9395147,lng:30.3151553},scrollwheel:!1},r=document.querySelector(".map__interactive-area--preview"),l=document.querySelector(".map__interactive-area--big");if(null!==r){var a=new google.maps.Map(r,n);new google.maps.Marker({position:t,map:a,title:e})}if(null!==l){var c=new google.maps.Map(l,o);new google.maps.Marker({position:t,map:c,title:e})}}!function(){var e=document.querySelectorAll(".product");function t(){this.classList.remove("product--no-focus")}function n(){this.classList.add("product--no-focus")}0<(e=Array.prototype.slice.call(e)).length&&e.forEach(function(e){e.addEventListener("focus",t,!0),e.addEventListener("blur",n,!0)})}(),function(){var a=27,c=9,n=32,e=document.querySelector(".contacts__map-link"),t=document.querySelector(".modal--map"),r=document.querySelector(".button--contacts"),l=document.querySelector(".modal--message"),o=document.querySelectorAll(".button--buy");o=Array.prototype.slice.call(o);var i=document.querySelector(".modal--cart-plus"),s=document.querySelectorAll(".popular__list--products, .catalog__list");s=Array.prototype.slice.call(s);var u=[e,r,o],d=[function(){null!==t&&e.addEventListener("click",function(e){b(e,t)})},function(){function t(e){b(e,l),p?(n.value=p,o.focus()):n.focus()}if(null!==l){var e=l.querySelector(".message-form"),n=l.querySelector("[name=name]"),o=l.querySelector("[name=email]");!function(){try{p=localStorage.getItem("name")}catch(e){v=!1}}(),r.addEventListener("click",function(e){t(e)}),h(r),"A"===r.tagName&&r.addEventListener("keydown",function(e){y(e)&&t(e)}),e.addEventListener("submit",function(e){var t;t=e,n.value&&o.value?v&&localStorage.setItem("name",n.value):(t.preventDefault(),l.classList.remove("modal--error"),l.classList.add("modal--no-animation"),setTimeout(function(){l.classList.add("modal--error")},0),n.value?o.focus():n.focus())})}},function(){function t(e){for(var t=e.target;t!==e.currentTarget;){if(t.classList.contains("button--buy"))return void b(e,i);t=t.parentElement}}0<s.length&&0<o.length&&null!==i&&(o.forEach(function(e){h(e)}),s.forEach(function(e){e.addEventListener("click",function(e){t(e)}),e.addEventListener("keydown",function(e){y(e)&&t(e)})}))}],f=document.querySelectorAll(".modal");f=Array.prototype.slice.call(f);var m=document.querySelector(".overlay"),v=!0,p="";function y(e){var t=e.key||e.keyCode;return" "===t||"Spacebar"===t||t===n}function h(e){e.setAttribute("role","button")}function b(e,t){var n,o,r;e.preventDefault(),n=t,o=document.activeElement,n.startPoint=o,null!==m&&m.classList.add("overlay--show"),t.classList.add("modal--show"),t.firstTabStop.focus(),r=t,f.shownModal=r}function _(e,t){f.shownModal&&t(e,f.shownModal)}function S(e,t){var n,o,r,l;("Tab"===(o=(n=e).key||n.keyCode)||o===c)&&(e.shiftKey?document.activeElement===t.firstTabStop&&(e.preventDefault(),t.lastTabStop.focus()):document.activeElement===t.lastTabStop&&(e.preventDefault(),t.firstTabStop.focus())),("Escape"===(l=(r=e).key||r.keyCode)||"Esc"===l||l===a)&&w(e,t)}function g(e,t){E(e,t),L()}function E(e,t){e.preventDefault(),t.classList.remove("modal--show"),t.classList.remove("modal--no-animation"),t.classList.remove("modal--error"),t.startPoint.focus(),f.shownModal=""}function L(){m.classList.remove("overlay--show")}function w(e,t){E(e,t),null!==m&&L()}0<f.length&&(f.forEach(function(e){var t,n,o;n=(t=e).querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]'),n=Array.prototype.slice.call(n),t.firstTabStop=n[0],t.lastTabStop=n[n.length-1],(o=e).querySelector(".modal__close").addEventListener("click",function(e){w(e,o)})}),window.addEventListener("keydown",function(e){_(e,S)}),null!==m&&m.addEventListener("click",function(e){_(e,g)})),0<u.length&&u.forEach(function(e,t){null!==e&&d[t]()})}(),function(){var e=document.querySelectorAll(".slider");function t(r){var l=r.querySelectorAll(".slider__control"),n=r.querySelectorAll(".slider__item"),a=r.querySelectorAll(".slider__button"),e=r.querySelectorAll(".button");function t(e){l.forEach(function(e){e.classList.remove("slider__control--active")}),e.classList.add("slider__control--active")}function o(e){e.forEach(function(e,t){e.itemIndex=t})}function c(){n.forEach(function(e){if(e.classList.contains("slider__item--show")){var t=e;r.currentSlideIndex=t.itemIndex}})}function i(e){var t=e.itemIndex;n[t]&&(n.forEach(function(e){e.classList.remove("slider__item--show")}),n[t].classList.add("slider__item--show"),c())}function s(){0<e.length&&e.forEach(function(e){e.removeAttribute("tabindex");for(var t=e.parentElement;!t.classList.contains("slider__slides");){if(!t.classList.contains("slider__item--show"))return void e.setAttribute("tabindex",-1);t=t.parentElement}})}function u(e){var t;0<a.length&&(a.forEach(function(e){e.disabled&&(e.disabled=!1)}),(t=e)===l[0]&&(a[0].disabled=!0),t===l[l.length-1]&&(a[a.length-1].disabled=!0))}function d(e){e===l[l.length-1]&&e.focus(),e===l[0]&&l[1].focus()}function f(e){t(e),i(e),s(),u(e)}function m(e,t){e.preventDefault();var n=r.currentSlideIndex;if(t===a[0])var o=l[n-1];else o=l[n+1];f(o),d(o)}l=Array.prototype.slice.call(l),n=Array.prototype.slice.call(n),a=Array.prototype.slice.call(a),e=Array.prototype.slice.call(e),o(l),o(n),c(),s(),r.addEventListener("click",function(e){!function(e){for(var t,n=e.target;n!==e.currentTarget;){if(n.classList.contains("slider__control"))return t=n,e.preventDefault(),f(t);if(n.classList.contains("slider__button"))return n.disabled?(e.preventDefault(),d(l[r.currentSlideIndex])):m(e,n);n=n.parentElement}}(e)})}0<(e=Array.prototype.slice.call(e)).length&&e.forEach(function(e){t(e)})}();
